# Вопросы по теме "Основы написания сценариев"

## Знание

1. Что такое переменные среды?
   - [x] Динамические значения, которые могут влиять на поведение процессов в операционной системе
   - [ ] Статические значения, хранящиеся в файлах конфигурации
   - [ ] Переменные, доступные только внутри Shell скриптов
   - [ ] Константы, определяемые при компиляции системы
2. Какая переменная среды определяет список директорий для поиска исполняемых файлов?
   - [x] `PATH`
   - [ ] `HOME`
   - [ ] `USER`
   - [ ] `SHELL`
3. Какой символ используется в Bash для обозначения начала шебанга (shebang)?
   - [x] `#!`
   - [ ] `#/`
   - [ ] `!/`
   - [ ] `@!`
4. Что произойдет при выполнении команды `name = "John"` с пробелами вокруг знака равенства?
   - [x] Возникнет ошибка
   - [ ] Переменная будет создана корректно
   - [ ] Значение будет присвоено с пробелами
   - [ ] Команда будет игнорирована
5. Какой синтаксис используется для получения длины строки в Bash?
   - [x] `${#variable}`
   - [ ] `${variable#}`
   - [ ] `${len(variable)}`
   - [ ] `${variable.length}`
6. Как в Bash выполнить арифметические операции с целыми числами?
   - [x] Используя двойные круглые скобки `(( ))`
   - [ ] Используя одинарные круглые скобки `( )`
   - [ ] Используя квадратные скобки `[ ]`
   - [ ] Используя фигурные скобки `{ }`
7. Какой инструмент используется для операций с действительными числами в Bash?
   - [x] `bc` (Basic Calculator)
   - [ ] `calc`
   - [ ] `math`
   - [ ] не используется никакой, Bash прекрасно работает с float
8. В чем разница между одинарными и двойными кавычками при работе со строками?
   - [x] В одинарных кавычках переменные не интерполируются, в двойных - интерполируются
   - [ ] Одинарные кавычки используются для чисел, двойные для строк
   - [ ] Разницы нет, можно использовать любые
   - [ ] Одинарные кавычки быстрее обрабатываются
9. Какой синтаксис используется для извлечения подстроки в Bash?
   - [x] `${variable:start:length}`
   - [ ] `${variable[start:length]}`
   - [ ] `${substr(variable,start,length)}`
   - [ ] `${variable.substring(start,length)}`
10. Как получить все элементы массива в Bash?
    - [x] `${array[@]}`
    - [ ] `${array[*all]}`
    - [ ] `${array.all}`
    - [ ] `${array[0..n]}`
11. Какой оператор сравнения используется для проверки равенства чисел?
    - [x] `-eq`
    - [ ] `==`
    - [ ] `-equal`
    - [ ] `=`
12. Какой оператор сравнения используется для проверки, если одно число меньше другого?
    - [x] `-lt`
    - [ ] `<`
    - [ ] `less`
    - [ ] `-less`
13. Какой оператор проверяет, что файл существует и является обычным файлом?
    - [x] `-f`
    - [ ] `-e`
    - [ ] `-d`
    - [ ] `-r`
14. Что означает оператор `&&` в командной строке?
    - [x] Выполняет вторую команду только если первая завершилась успешно
    - [ ] Выполняет обе команды параллельно
    - [ ] Выполняет вторую команду только если первая завершилась с ошибкой
    - [ ] Объединяет вывод двух команд
15. Что означает оператор `||` в командной строке?
    - [x] Выполняет вторую команду только если первая завершилась с ошибкой
    - [ ] Выполняет обе команды параллельно
    - [ ] Выполняет вторую команду только если первая завершилась успешно
    - [ ] Объединяет вывод двух команд
16. Какая конструкция в Bash используется для многократной проверки условий в if?
    - [x] `elif`
    - [ ] `elseif`
    - [ ] `else if`
    - [ ] `ifelse`
17. Как создать числовой диапазон в цикле for?
    - [x] `{start..end}`
    - [ ] `[start..end]`
    - [ ] `(start..end)`
    - [ ] `start:end`
18. В чем разница между циклами while и until?
    - [x] `while` выполняется пока условие истинно, `until` - пока условие ложно
    - [ ] `while` быстрее, `until` медленнее
    - [ ] `while` для чисел, `until` для строк
    - [ ] Разницы нет, это синонимы
19. Как объявить локальную переменную внутри функции?
    - [x] `local variable_name=value`
    - [ ] `var variable_name=value`
    - [ ] `private variable_name=value`
    - [ ] `scope variable_name=value`
20. Какая переменная содержит количество аргументов, переданных скрипту?
    - [x] `$#`
    - [ ] `$@`
    - [ ] `$*`
    - [ ] `$0`
21. Что делает команда `set -e`?
    - [x] Завершает выполнение скрипта при первой ошибке
    - [ ] Включает режим отладки
    - [ ] Экспортирует все переменные
    - [ ] Устанавливает кодировку UTF-8
22. Какой символ используется для выполнения команды в фоновом режиме?
    - [x] `&`
    - [ ] `%`
    - [ ] `*`
    - [ ] `@`

## Понимание

1. Как в Bash добавить директорию `/opt/myapp/bin` в переменную `PATH`?
   - `export PATH=$PATH:/opt/myapp/bin`
   - `export PATH=/opt/myapp/bin:$PATH`
2. Как объявить переменную `version` со значением "2.0.5" в Bash?
   - `version="2.0.5"`
3. Как объявить переменную `app_name` со значением "myapp" в Bash?
   - `app_name="myapp"`
4. Как в Bash вычислить сумму двух целых чисел `a` и `b` и сохранить результат в переменную `sum`?
   - `sum=$((a + b))`
   - `sum=$(echo "$a + $b" | bc)`
5. Как в Bash вычислить произведение двух целых чисел `a` и `b` и сохранить результат в переменную `product`?
   - `product=$((a * b))`
   - `product=$(echo "$a * $b" | bc)`
6. Как в Bash вычислить сумму двух действительных чисел `3.14` и `2.86` используя `bc`?
   - `echo "3.14 + 2.86" | bc`
7. Как в Bash получить длину строки, хранящейся в переменной `text`?
   - `${#text}`
8. Как в Bash извлечь подстроку из переменной `str="Hello, World!"` начиная с позиции 7 и длиной 5 символов?
   - `${str:7:5}`
9. Как в Bash заменить все вхождения символа "o" на "O" в переменной `text="Hello, World!"`?
   - `${text//o/O}`
10. Дан код Bash:

    ```bash
    text="Hello, World!"
    echo "${text//l/L}"
    ```

    Что будет выведено на экран в результате выполнения этого кода?
    - `HeLLo, WorLd!`
11. Как в Bash добавить элемент "orange" в существующий массив `fruits`?
    - `fruits+=("orange")`
    - `fruits[${#fruits[@]}]="orange"`
12. Как в терминале удалить файл `installation.log`?
    - `rm installation.log`
13. Как в терминале создать файл `config.txt` с содержимым `APP_NAME=app`?
    - `echo "APP_NAME=app" > config.txt`
14. Как в терминале создать директорию `logs` и перейти в неё?
    - `mkdir logs && cd logs`
    - `mkdir logs; cd logs`
15. Как в терминале вывести список файлов (включая скрытые) в директории `/app/bin` с подробной информацией?
    - `ls -la /app/bin`

## Интеграция

1. Напишите Bash скрипт, который:
   1. Читает переменную окружения `APP_ENV`.
   2. Если `APP_ENV` не установлена, выводит сообщение "APP_ENV is not set" и завершает выполнение с кодом 1.
   3. Читает переменную окружения `BRANCH_NAME`.
   4. Если `BRANCH_NAME` не установлена, устанавливает её значение в "main".
   5. Клонирует Git репозиторий `https://gitlab.local/tesseract/tesseract.git` в директорию `/opt/tesseract`
   6. Переходит в директорию `/opt/tesseract`.
   7. Переходит на ветку, имя которой хранится в переменной `BRANCH_NAME`.
   8. Выполняет команду `make deploy`.
   9. При успешном выполнении команды `make deploy` выводит сообщение "Deployment succeeded!".
   10. Выполнять журналирование всех шагов в файл `/var/log/deploy.log`.
2. Напишите Bash скрипт, который:
   1. Читает переменную окружения `DB_HOST`.
   2. Если `DB_HOST` не установлена, выводит сообщение "DB_HOST is not set" и завершает выполнение с кодом 1.
   3. Читает переменную окружения `DB_PORT`.
   4. Если `DB_PORT` не установлена, устанавливает её значение в "5432".
   5. Читает переменную окружения `DB_USER`.
   6. Если `DB_USER` не установлена, выводит сообщение "DB_USER is not set" и завершает выполнение с кодом 1.
   7. Читает переменную окружения `DB_PASSWORD`.
   8. Если `DB_PASSWORD` не установлена, выводит сообщение "DB_PASSWORD is not set" и завершает выполнение с кодом 1.
   9. Выполняет SQL команду миграции базы данных, используя файл `migrations.sql`:
      `psql -h $DB_HOST -p $DB_PORT -U $DB_USER -f migrations.sql`
   10. Выполнять журналирование всех шагов в файл `/var/log/db_migration.log`.
3. Напишите Bash скрипт, который:
   1. Читает переменную окружения `SERVICE_NAME`.
   2. Если `SERVICE_NAME` не установлена, выводит сообщение "SERVICE_NAME is not set" и завершает выполнение с кодом 1.
   3. Читает переменную окружения `SERVICE_PORT`.
   4. Если `SERVICE_PORT` не установлена, устанавливает её значение в "8080".
   5. Проверяет, запущен ли сервис с именем, хранящимся в переменной `SERVICE_NAME`, используя команду `systemctl is-active $SERVICE_NAME`.
   6. Если сервис не запущен, пытается его запустить командой `systemctl start $SERVICE_NAME`.
   7. После попытки запуска проверяет статус сервиса снова.
   8. Если сервис успешно запущен, выводит сообщение "Service $SERVICE_NAME is running on port $SERVICE_PORT".
   9. Если сервис не удалось запустить, выводит сообщение "Failed to start service $SERVICE_NAME".
   10. Выполнять журналирование всех шагов в файл `/var/log/service_check.log`.
4. Напишите Bash скрипт, который:
   1. Читает переменную окружения `BACKUP_DIR`.
   2. Если `BACKUP_DIR` не установлена, выводит сообщение "BACKUP_DIR is not set" и завершает выполнение с кодом 1.
   3. Читает переменную окружения `SOURCE_DIR`.
   4. Если `SOURCE_DIR` не установлена, выводит сообщение "SOURCE_DIR is not set" и завершает выполнение с кодом 1.
   5. Проверяет, существует ли директория `BACKUP_DIR`. Если нет, создает её командой `mkdir -p $BACKUP_DIR`.
   6. Проверяет, существует ли директория `SOURCE_DIR`. Если нет, выводит сообщение "SOURCE_DIR does not exist" и завершает выполнение с кодом 1.
   7. Создает архив с именем `backup_YYYYMMDD_HHMMSS.tar.gz`, где `YYYYMMDD_HHMMSS` - текущая дата и время, содержащий содержимое директории, указанной в `SOURCE_DIR`.
   8. Сохраняет созданный архив в директорию, указанную в `BACKUP_DIR`.
   9. При успешном создании архива выводит сообщение "Backup created successfully at $BACKUP_DIR/backup_YYYYMMDD_HHMMSS.tar.gz".
   10. Выполнять журналирование всех шагов в файл `/var/log/backup.log`.
5. Напишите Bash скрипт, который:
   1. Читает переменную окружения `WATCH_DIR`.
   2. Если `WATCH_DIR` не установлена, выводит сообщение "WATCH_DIR is not set" и завершает выполнение с кодом 1.
   3. Читает переменную окружения `MAX_USAGE` (максимальный процент использования диска).
   4. Если `MAX_USAGE` не установлена, устанавливает её значение в "80".
   5. Читает переменную окружения `FILE_AGE_DAYS` (возраст файлов для удаления в днях).
   6. Если `FILE_AGE_DAYS` не установлена, устанавливает её значение в "30".
   7. Проверяет текущее использование диска для директории `WATCH_DIR` используя команду `df`.
   8. Если использование превышает `MAX_USAGE`, ищет и удаляет файлы старше `FILE_AGE_DAYS` дней в директории `WATCH_DIR` используя команду `find $WATCH_DIR -type f -mtime +$FILE_AGE_DAYS -delete`.
   9. После очистки выводит сообщение с количеством освобожденного места.
   10. Выполнять журналирование всех шагов в файл `/var/log/disk_cleanup.log`.
6. Напишите Bash скрипт, который:
   1. Читает переменную окружения `DOCKER_IMAGE`.
   2. Если `DOCKER_IMAGE` не установлена, выводит сообщение "DOCKER_IMAGE is not set" и завершает выполнение с кодом 1.
   3. Читает переменную окружения `CONTAINER_NAME`.
   4. Если `CONTAINER_NAME` не установлена, устанавливает её значение в "app".
   5. Читает переменную окружения `CONTAINER_PORT`.
   6. Если `CONTAINER_PORT` не установлена, устанавливает её значение в "8080".
   7. Проверяет, существует ли контейнер с именем `CONTAINER_NAME` используя команду `docker ps -a`. Если существует, останавливает его командой `docker stop $CONTAINER_NAME` и удаляет командой `docker rm $CONTAINER_NAME`.
   8. Выполняет команду `docker pull $DOCKER_IMAGE` для загрузки образа.
   9. Запускает контейнер командой `docker run -d --name $CONTAINER_NAME -p $CONTAINER_PORT:$CONTAINER_PORT $DOCKER_IMAGE` и при успешном запуске выводит сообщение "Container $CONTAINER_NAME started successfully on port $CONTAINER_PORT".
   10. Выполнять журналирование всех шагов в файл `/var/log/docker_deploy.log`.